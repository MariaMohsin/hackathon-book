"use strict";(self.webpackChunkai_native_book=self.webpackChunkai_native_book||[]).push([[265],{3128:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"robot-nervous-system/motion-sensors","title":"Motion Sensors","description":"Overview","source":"@site/docs/robot-nervous-system/motion-sensors.md","sourceDirName":"robot-nervous-system","slug":"/robot-nervous-system/motion-sensors","permalink":"/docs/robot-nervous-system/motion-sensors","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/docs/docs/robot-nervous-system/motion-sensors.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Motion Sensors","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Vision Sensors","permalink":"/docs/robot-nervous-system/vision-sensors"},"next":{"title":"Actuators","permalink":"/docs/robot-nervous-system/actuators"}}');var i=r(4848),t=r(8453);const o={title:"Motion Sensors",sidebar_position:3},l="Motion Sensors",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Encoders",id:"encoders",level:2},{value:"What Are Encoders?",id:"what-are-encoders",level:3},{value:"Types of Encoders",id:"types-of-encoders",level:3},{value:"Incremental Encoders",id:"incremental-encoders",level:4},{value:"Absolute Encoders",id:"absolute-encoders",level:4},{value:"Calculating Robot Motion from Encoders",id:"calculating-robot-motion-from-encoders",level:3},{value:"IMU (Inertial Measurement Unit)",id:"imu-inertial-measurement-unit",level:2},{value:"What is an IMU?",id:"what-is-an-imu",level:3},{value:"IMU Data",id:"imu-data",level:3},{value:"Applications",id:"applications",level:3},{value:"Example: Using MPU-6050 IMU",id:"example-using-mpu-6050-imu",level:3},{value:"Force/Torque Sensors",id:"forcetorque-sensors",level:2},{value:"Applications",id:"applications-1",level:3},{value:"Example: Monitoring Gripper Force",id:"example-monitoring-gripper-force",level:3},{value:"Position Sensors",id:"position-sensors",level:2},{value:"Types",id:"types",level:3},{value:"Applications",id:"applications-2",level:3},{value:"Sensor Fusion for Better Estimates",id:"sensor-fusion-for-better-estimates",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"motion-sensors",children:"Motion Sensors"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Motion sensors measure the robot's movement, velocity, acceleration, and orientation. They are essential for robot control, navigation, and balancing."}),"\n",(0,i.jsx)(n.h2,{id:"encoders",children:"Encoders"}),"\n",(0,i.jsx)(n.h3,{id:"what-are-encoders",children:"What Are Encoders?"}),"\n",(0,i.jsx)(n.p,{children:"Encoders measure angular position and velocity of rotating shafts. They are critical for:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Joint Position"}),": Know exact angle of each joint"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Velocity Control"}),": Track speed of motors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Odometry"}),": Estimate distance traveled"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"types-of-encoders",children:"Types of Encoders"}),"\n",(0,i.jsx)(n.h4,{id:"incremental-encoders",children:"Incremental Encoders"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Detect changes from a reference point"}),"\n",(0,i.jsx)(n.li,{children:"Output: pulses as shaft rotates"}),"\n",(0,i.jsx)(n.li,{children:"Resolution: Lines per revolution (LPR)"}),"\n",(0,i.jsx)(n.li,{children:"Example: 2048 LPR encoder"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Read encoder data via GPIO\r\nimport RPi.GPIO as GPIO\r\n\r\nENCODER_PIN = 17\r\ncount = 0\r\n\r\ndef encoder_callback(channel):\r\n    global count\r\n    count += 1\r\n\r\nGPIO.setup(ENCODER_PIN, GPIO.IN)\r\nGPIO.add_event_detect(ENCODER_PIN, GPIO.RISING, callback=encoder_callback)\r\n\r\n# Calculate distance: distance = count * (wheel_circumference / PPR)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"absolute-encoders",children:"Absolute Encoders"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Know exact position without reference"}),"\n",(0,i.jsx)(n.li,{children:"Multiturn encoders track unlimited rotations"}),"\n",(0,i.jsx)(n.li,{children:"Output: Digital value (CANopen, SSI, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"More expensive but more reliable"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"calculating-robot-motion-from-encoders",children:"Calculating Robot Motion from Encoders"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class OdometryCalculator:\r\n    def __init__(self, wheel_radius, wheel_distance):\r\n        self.wheel_radius = wheel_radius\r\n        self.wheel_distance = wheel_distance\r\n        self.left_count = 0\r\n        self.right_count = 0\r\n        self.x = 0\r\n        self.y = 0\r\n        self.theta = 0\r\n    \r\n    def update_odometry(self, left_counts, right_counts, dt):\r\n        # Calculate distances traveled\r\n        left_dist = (left_counts * 2 * 3.14159 * self.wheel_radius) / 2048\r\n        right_dist = (right_counts * 2 * 3.14159 * self.wheel_radius) / 2048\r\n        \r\n        # Calculate linear and angular velocity\r\n        linear = (left_dist + right_dist) / 2\r\n        angular = (right_dist - left_dist) / self.wheel_distance\r\n        \r\n        # Update position\r\n        self.theta += angular\r\n        self.x += linear * 3.14159 / 180 * self.theta\r\n        self.y += linear * 3.14159 / 180 * self.theta\r\n        \r\n        return self.x, self.y, self.theta\n"})}),"\n",(0,i.jsx)(n.h2,{id:"imu-inertial-measurement-unit",children:"IMU (Inertial Measurement Unit)"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-an-imu",children:"What is an IMU?"}),"\n",(0,i.jsx)(n.p,{children:"An IMU combines three sensors:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Accelerometer"}),": Measures linear acceleration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gyroscope"}),": Measures angular velocity (rotation rate)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Magnetometer"}),": Measures magnetic field (compass)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"imu-data",children:"IMU Data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Accelerometer output: [ax, ay, az] in m/s\xb2\r\nGyroscope output: [gx, gy, gz] in rad/s\r\nMagnetometer output: [mx, my, mz] in Tesla\n"})}),"\n",(0,i.jsx)(n.h3,{id:"applications",children:"Applications"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Robot Orientation"}),": Determine which way is up"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Impact Detection"}),": Detect collisions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vibration Analysis"}),": Monitor motor health"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Balance Control"}),": Stabilize bipedal robots"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-using-mpu-6050-imu",children:"Example: Using MPU-6050 IMU"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import smbus\r\nimport math\r\nimport time\r\n\r\nclass MPU6050:\r\n    def __init__(self, address=0x68):\r\n        self.bus = smbus.SMBus(1)\r\n        self.address = address\r\n        self.bus.write_byte_data(self.address, 0x6B, 0)\r\n    \r\n    def read_raw_data(self, addr):\r\n        high = self.bus.read_byte_data(self.address, addr)\r\n        low = self.bus.read_byte_data(self.address, addr + 1)\r\n        value = (high << 8) | low\r\n        if value > 32768:\r\n            value = value - 65536\r\n        return value\r\n    \r\n    def get_accel(self):\r\n        x = self.read_raw_data(0x3B) / 16384.0\r\n        y = self.read_raw_data(0x3D) / 16384.0\r\n        z = self.read_raw_data(0x3F) / 16384.0\r\n        return x, y, z\r\n    \r\n    def get_gyro(self):\r\n        x = self.read_raw_data(0x43) / 131.0\r\n        y = self.read_raw_data(0x45) / 131.0\r\n        z = self.read_raw_data(0x47) / 131.0\r\n        return x, y, z\r\n\r\n# Usage\r\nimu = MPU6050()\r\nwhile True:\r\n    accel = imu.get_accel()\r\n    gyro = imu.get_gyro()\r\n    print(f"Accel: {accel}, Gyro: {gyro}")\r\n    time.sleep(0.1)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"forcetorque-sensors",children:"Force/Torque Sensors"}),"\n",(0,i.jsx)(n.h3,{id:"applications-1",children:"Applications"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gripper Control"}),": Measure grip force to avoid crushing objects"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compliance"}),": Detect interaction forces"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Impedance Control"}),": React to external forces intelligently"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-monitoring-gripper-force",children:"Example: Monitoring Gripper Force"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def monitor_grip_force(force_sensor, target_force, max_force):\r\n    """Maintain consistent grip force"""\r\n    current_force = force_sensor.read()\r\n    \r\n    if current_force < target_force:\r\n        # Increase grip\r\n        return "increase"\r\n    elif current_force > max_force:\r\n        # Decrease grip (too much force)\r\n        return "decrease"\r\n    else:\r\n        # Hold current grip\r\n        return "hold"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"position-sensors",children:"Position Sensors"}),"\n",(0,i.jsx)(n.h3,{id:"types",children:"Types"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Potentiometers"}),": Variable resistor tracking position"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Linear Potentiometers"}),": Measure linear displacement"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Draw-wire Sensors"}),": Measure distance as cable extends"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"applications-2",children:"Applications"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Track end-effector position"}),"\n",(0,i.jsx)(n.li,{children:"Monitor joint limits"}),"\n",(0,i.jsx)(n.li,{children:"Feedback for position control"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"sensor-fusion-for-better-estimates",children:"Sensor Fusion for Better Estimates"}),"\n",(0,i.jsx)(n.p,{children:"Combining multiple motion sensors improves accuracy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from filterpy.kalman import KalmanFilter\r\nimport numpy as np\r\n\r\nclass MotionEstimator:\r\n    def __init__(self):\r\n        self.kf = KalmanFilter(dim_x=4, dim_z=2)\r\n        self.kf.x = np.array([[0.], [0.], [0.], [0.]])  # [x, y, vx, vy]\r\n        self.kf.F = np.array([[1., 0., 1., 0.],\r\n                              [0., 1., 0., 1.],\r\n                              [0., 0., 1., 0.],\r\n                              [0., 0., 0., 1.]])  # State transition\r\n        self.kf.H = np.array([[1., 0., 0., 0.],\r\n                              [0., 1., 0., 0.]])  # Measurement function\r\n        self.kf.R = np.eye(2) * 0.1  # Measurement noise\r\n        self.kf.Q = np.eye(4) * 0.001  # Process noise\r\n    \r\n    def update(self, encoder_position, imu_accel):\r\n        """Fuse encoder and IMU data"""\r\n        self.kf.predict()\r\n        self.kf.update(encoder_position)\r\n        return self.kf.x.flatten()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sensor Placement"}),": Mount sensors where vibration is minimal"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Calibration"}),": Zero calibrate before each use"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Filtering"}),": Apply low-pass filters to reduce noise"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Synchronization"}),": Timestamp all sensor data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Redundancy"}),": Use multiple sensors for critical measurements"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Problem"}),(0,i.jsx)(n.th,{children:"Cause"}),(0,i.jsx)(n.th,{children:"Solution"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Encoder reading drifts"}),(0,i.jsx)(n.td,{children:"Slipping wheels"}),(0,i.jsx)(n.td,{children:"Check tire traction"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IMU gives random values"}),(0,i.jsx)(n.td,{children:"I2C communication issue"}),(0,i.jsx)(n.td,{children:"Check wiring and bus clock"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Force sensor noisy"}),(0,i.jsx)(n.td,{children:"Electrical interference"}),(0,i.jsx)(n.td,{children:"Shield cables, add capacitors"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.p,{children:["Learn how to ",(0,i.jsx)(n.a,{href:"sensor-integration",children:"Integrate Sensors"})," into a complete system."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);